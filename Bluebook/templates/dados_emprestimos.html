<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="../static/css/style.css">
    <title>Dados - Empréstimos</title>
</head>

<body>
    <nav id="sidebar">
        <div id="sidebar_content">
            <div id="user">
                <img src="static/images/avatar3.jpg " id="user_avatar" alt="Avatar">
    
                <p id="user_infos">
                    <span class="item-description">
                        Tipo de usuário 
                        <!-- Usuário Admin ou Funcionário ? Pegar no banco  -->
                    </span>
                    <span class="item-description">
                        Usuário do sistema
                    </span>
                </p>
            </div>
    
            <ul id="side_items">
               
                <li class="side-item">
                    <a href="{{url_for('index')}}">
                        <i class="fa-solid fa-chart-line"></i>
                        <span class="item-description">
                            Página inicial
                        </span>
                    </a>
                </li>

                  <!-- Funcionalidade Admin -->
                  <!-- <li class="side-item">  
                    <a href="{{url_for('cadastro')}}">
                        <i class="fa-solid fa-user"></i>
                        <span class="item-description">
                            Adicionar Usuários do Sistema
                        </span>
                    </a>
                </li> -->

                  <!-- Funcionalidade Admin -->
                  <!-- <li class="side-item">
                    <a href="{{url_for('logs')}}">
                        <i class="fa-solid fa-right-to-bracket"></i>
                        <span class="item-description">
                            Logs no sistema 
                        </span>
                    </a>
                </li> -->

                <li class="side-item">
                    <a href="{{url_for('user')}}">
                        <i class="fa-solid fa-book-open-reader"></i>
                        <span class="item-description">
                            Adicionar Leitor
                        </span>
                    </a>
                </li>

                <li class="side-item ">
                    <a href="{{url_for('book')}}">
                        <i class="fa-solid fa-book"></i>
                        <span class="item-description">
                            Adicionar Livro
                        </span>
                    </a>
                </li>

                <li class="side-item" >
                    <a href="{{url_for('lending')}}">
                        <i class="fa-solid fa-money-check-dollar"></i>
                        <span class="item-description">
                            Realizar Empréstimo
                        </span>
                    </a>
                </li>

                <li class="side-item">
                    <a href="{{url_for('pg_listagem')}} ">
                        <i class="fa-solid fa-list"></i>
                        <span class="item-description">
                            Listagens
                        </span>
                    </a>
                </li>

                <li class="side-item">
                    <a href="{{url_for('editar_usuarios')}}">
                        <i class="fa-solid fa-user-pen"></i>
                        <span class="item-description">
                            Editar Leitor
                        </span>
                    </a>
                </li>


                <li class="side-item">
                    <a href="{{url_for('editar_livros')}}">
                        <i class="fa-solid fa-file-pen"></i>
                        <span class="item-description">
                           Editar Livro
                        </span>
                    </a>
                </li>

                <li class="side-item">
                    <a href="{{url_for('editar_emprestimos')}}">
                        <i class="fa-solid fa-money-bill-trend-up"></i>
                        <span class="item-description">
                          Editar Empréstimos
                        </span>
                    </a>
                </li>
                
                <li class="side-item">
                    <a href="{{url_for('dados_usuarios')}}">
                        <i class="fa-solid fa-users"></i>
                        <span class="item-description">
                          Dados - Usuários
                        </span>
                    </a>
                </li>

                <li class="side-item">
                    <a href="{{url_for('dados_livros')}}">
                        <i class="fa-solid fa-book-open"></i>
                        <span class="item-description">
                          Dados - Livros
                        </span>
                    </a>
                </li>

                <li class="side-item active">
                    <a href="{{url_for('dados_emprestimos')}}">
                        <i class="fa-solid fa-money-check"></i>
                        <span class="item-description">
                          Dados - Empréstimos
                        </span>
                    </a>
                </li>
            </ul>
           
            <button id="open_btn">
                <i id="open_btn_icon" class="fa-solid fa-chevron-right"></i>
            </button>
        </div>

        <div id="logout">
            <button id="logout_btn">
                <i class="fa-solid fa-right-from-bracket"></i>
                <span class="item-description">
                    Logout
                </span>
            </button>
        </div>
    </nav>

    <header>
        <div class="logo">
                <img src="static/images/bluebooklog.png" alt="Logo">
        </div> 
    </header>

    <main>
        <div class="container_list container_list2" id="container_list">
            <div class="container_userd">
                <h1>Dados dos Empréstimos</h1>
                <h1 style="font-size: 20px;">{{mensagem}}</h1>
                <br>

                <div class="table-scroll-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Leitor</th>
                                <th>Título do Livro</th>
                                <th>Valor</th>
                                <th>Data de Empréstimo</th>
                                <th>Data de Devolução</th>
                                
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Aqui tem que substituir as informações dos livros pelo emprestimo, trocar só o conteudo dos {}
                            pra não perdser a configuração do css
                            att, riversson :p -->
                            
                            <!-- {% for book in books %} -->
                                
                            
                            <!-- <tr>
                                <td>{{book.boo_titulo}}</td>
                                <td>{{book.boo_autor}}</td>
                                <td>{{book.boo_genero}}</td>
                                <td>{{book.boo_isbn}}</td>
                                <td>{{book.boo_quant_estoque}}</td>
                                <td id="td-button">
                                    <button type="submit" id="editar"><a href="{{ url_for('books.editar_book', id=book.boo_id) }}" style="text-decoration: none; color: white;">Editar</a></button>
                                    <button type="submit" id="excluir"><a href="{{ url_for('books.excluir_book', id=book.boo_id) }}" style="text-decoration: none; color: white;">Excluir</a></button>
                                    <button type="submit" id="devolver"><a href="#" style="text-decoration: none; color: white;">Devolver</a></button>

                                </td>
                            </tr> 
                            {% endfor %} -->
                            
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>
<!-- Modal -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Confirmação de Devolução</h2>
            <p>Você tem certeza que deseja devolver este livro?</p>
            <button id="confirm-devolver">Confirmar Devolução</button>
        </div>
    </div>

    <script>
        document.getElementById('open_btn').addEventListener('click', function () {
            document.getElementById('sidebar').classList.toggle('open-sidebar');
        });

        var modal = document.getElementById("myModal");
        var btn = document.getElementById("devolver");
        var span = document.getElementsByClassName("close")[0];

        // Quando o botão é clicado, abre o modal
        btn.onclick = function() {
            modal.style.display = "block";
        }

        // Quando o usuário clica no botão de fechar (x), fecha o modal
        span.onclick = function() {
            modal.style.display = "none";
        }

        // Quando o usuário clica fora do modal, fecha o modal
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        // Quando o usuário clica no botão de confirmar devolução
        document.getElementById("confirm-devolver").onclick = function() {
            // Aqui você pode adicionar a lógica para processar a devolução
            alert("Devolução confirmada!");
            modal.style.display = "none"; // Fecha o modal
        }
    </script>

</body>
</html>